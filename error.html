<!DOCTYPE html>

<html>

<head>

    <meta charset="utf-8">

    <title>CDMiner</title>

    <link rel='shortcut icon' href='favicon.png' type='image/x-icon'/ >

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

    <script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>

    <script src="http://apps.bdimg.com/libs/bootstrap/3.3.4/js/bootstrap.min.js"></script>

    <style type="text/css">
        .top1 {
            height:120px;
            width:120px;
            background-color:#FFFFFF;
            margin-top:0px;
            overflow: hidden;
        }
        .accurate-h {
            margin-top: 0px;
            margin-bottom: 0px;
        }
        .circle {
          stroke: #fff;
          stroke-width: 1.5px;
        }

        .link {
          stroke: #999;
          stroke-opacity: .6;
        }
    </style>

</head>

<body>
<div class="container-fluid">
    <div class="page-header">

        <div class="row">
            <div class="col-xs-9 col-sm-9 col-md-9col-lg-9">
                <h3 class="accurate-h">CDMiner: Mining Cultural Differences of Entities</h3>
            </div>
            <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3">

            <form class="form-inline" action="query.php" method="get">
            <div class="input-group">
                <span class="input-group-addon" id="basic-addon1"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></span>
                <input type="text" name='query' class="form-control" placeholder="entity word">
                <span class="input-group-btn">
                    <button type="submit" class="btn btn-primary">Search!</button>
                </span>
            </div>
            </form>
            </div>
        </div>
    </div>

    <div class="row">
        <br>
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 text-center">
            <div class="alert alert-danger" role="alert">
                Sorry, your query <strong>"<?php echo $query;?>"</strong> is not in our database now. We show the result page of <strong>"<?php echo $en_word;?>"</strong>, which is the longest prefix match in our database.<br>
                You are also recommended to see these examples:
                <a href="http://adapt.seiee.sjtu.edu.cn/cdminer/query.php?query=amusement">amusement, </a> 
                <a href="http://adapt.seiee.sjtu.edu.cn/cdminer/query.php?query=ghost">ghost, </a>
                <a href="http://adapt.seiee.sjtu.edu.cn/cdminer/query.php?query=medicine">medicine, </a>
                <a href="http://adapt.seiee.sjtu.edu.cn/cdminer/query.php?query=emperor">emperor, </a>
                <a href="http://adapt.seiee.sjtu.edu.cn/cdminer/query.php?query=angel">angel, </a>
                <a href="http://adapt.seiee.sjtu.edu.cn/cdminer/query.php?query=computer">computer, </a>
                <a href="http://adapt.seiee.sjtu.edu.cn/cdminer/query.php?query=basketball">basketball </a>
            </div>
        </div>
    </div>

       <div class="row">
        <br>
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <div class="panel panel-default">
        <div class="panel-heading"><h4 class="accurate-h">Scale of cultural difference:</h4></div>
        <div class="panel-body">
<!--             <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 text-right"><div style="margin-top: 6px">culturally different</div></div> -->
            <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8 col-md-offset-2 col-lg-offset-2  text-center">
                <div class="row">
                    <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 text-left">culturally different</div>
                    <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 text-right">culturally same</div>
                </div>
                <div class="row">
                    <div id="colorbar" class="text-center"></div>
                </div>
                <div class="row">
                    <p class="text-left" style="margin-left: <?php echo 100*$diff_percent-6; ?>%; margin-top: 0px">Rank <?php echo $diff_rank; ?> / 5400 </p>
                </div>
            </div>
           <!--  <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 text-left"><div style="margin-top: 6px">culturally same</div></div> -->
        </div>
        </div>
        </div>
    </div>

    <div class="row">
        <br>
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <div class="panel panel-default">
        <div class="panel-heading"><h4 class="accurate-h">Top images returned by Bing:</h4></div>
        <div class="panel-body">
            <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                <div class="panel panel-default">
                <div class="panel-body">
                    <div class="col-md-3 text-center">
                        <a href="#" class="pop"><img class="top1" src="<?php echo $en_images[0];?>"/></a>
                    </div>
                    <div class="col-md-3 text-center">
                        <a href="#" class="pop"><img class="top1" src="<?php echo $en_images[1];?>"/></a>
                    </div>
                    <div class="col-md-3 text-center">
                        <a href="#" class="pop"><img class="top1" src="<?php echo $en_images[2];?>"/></a>
                    </div>
                    <div class="col-md-3 text-center">
                        <a href="#" class="pop"><img class="top1" src="<?php echo $en_images[3];?>"/></a>
                    </div>
                </div>
                <div class="panel-footer text-center">
                    <?php echo $en_word;?> <a href="http://www.bing.com/images/search?q=<?php echo $en_word;?>">(More)</a>
                </div>
                </div>
            </div>

            <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                <div class="panel panel-default">
                <div class="panel-body">
                    <div class="col-md-3 text-center">
                        <a href="#" class="pop"><img class="top1" src="<?php echo $ch_images[0];?>"/></a>
                    </div>
                    <div class="col-md-3 text-center">
                        <a href="#" class="pop"><img class="top1" src="<?php echo $ch_images[1];?>"/></a>
                    </div>
                    <div class="col-md-3 text-center">
                        <a href="#" class="pop"><img class="top1" src="<?php echo $ch_images[2];?>"/></a>
                    </div>
                    <div class="col-md-3 text-center">
                        <a href="#" class="pop"><img class="top1" src="<?php echo $ch_images[3];?>"/></a>
                    </div>
                </div>
                <div class="panel-footer text-center">
                    <?php echo $ch_word;?> <a href="http://www.bing.com/images/search?q=<?php echo $ch_word;?>">(More)</a>
                </div>
                </div>
            </div>
        </div>
        </div>
        </div>
    </div>

    <div class="row">
        <br>
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <div class="panel panel-default">
        <div class="panel-heading"><h4 class="accurate-h">Visualization of nearest neighbors:</h4></div>
        <div class="panel-body">
            <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                <div class="panel panel-default">
                <div class="panel-body">
                    <div class="col-md-12 text-center" id="en-network">
                        
                    </div>
                </div>
                <div class="panel-footer text-center">
                    <?php echo $en_word;?> <a href="./neighbor_list.php?lang=english&query=<?php echo $en_word;?>">(click to see full list)</a>
                </div>
                </div>
            </div>

            <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                <div class="panel panel-default">
                <div class="panel-body">
                    <div class="col-md-12 text-center" id="ch-network">
                
                    </div>
                </div>
                <div class="panel-footer text-center">
                    <?php echo $ch_word;?> <a href="./neighbor_list.php?lang=chinese&query=<?php echo $ch_word;?>">(click to see full list)</a>
                </div>
                </div>
            </div>
        </div>
        </div>
        </div>
    </div>


    <div class="modal fade" id="imagemodal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">              
            <div class="modal-body">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            <img src="" class="imagepreview" style="width: 100%;" >
            </div>
            </div>
        </div>
    </div>


</div>

<script src="http://apps.bdimg.com/libs/d3/3.4.8/d3.min.js"></script>

<script type="text/javascript" src="./js/colorbar.js"></script>

<script type="text/javascript">
    //make a color scale:

    myScale = d3.scale.linear()
        .domain(d3.extent(d3.range(0,1.1,0.1)))
        .range(["red","yellow"])

    colorbar = Colorbar()
        .origin([0,0])
        .scale(myScale).barlength(window.innerWidth * 0.62).thickness(window.innerWidth * 0.6 / 22)
        .orient("horizontal")

    placeholder = "#colorbar"

    colorbarObject = d3.select(placeholder)
        .call(colorbar)

    colorbarObject.pointTo(<?php echo $diff_percent;?>)

</script>

<script type="text/javascript" src="./js/network.js"></script>

<script type="text/javascript">
    
    var svg1 = d3.select("#en-network").append("svg")
        .attr("width", width)
        .attr("height", height);
    var en_word = <?php echo "'$en_word'";?>;
    var en_neighbors = <?php echo "$en_neighbors_string"; ?>;
    draw_network(en_word, en_neighbors, svg1);

    var svg2 = d3.select("#ch-network").append("svg")
        .attr("width", width)
        .attr("height", height);

    // d3.json("./data/sampleauthors.json", function (error, authorinfo) {
    //     if (error) throw error;
    //     draw_network(error, authorinfo, svg2);
    // });
    var ch_word = <?php echo "'$ch_word'";?>;
    var ch_neighbors = <?php echo "$ch_neighbors_string"; ?>;
    draw_network(ch_word, ch_neighbors, svg2);

</script>

<script type="text/javascript">
    $('.pop').on('click', function() {
        $('.imagepreview').attr('src', $(this).find('img').attr('src'));
        $('#imagemodal').modal('show');   
    }); 
</script>

</body>


</html>
